
# 测试环境

hadm06(ubuntu-12.04, 3.2.0-23-generic): 192.168.9.72
hadm07(ubuntu-12.04, 3.2.0-23-generic): 192.168.9.78
hadm08(ubuntu-12.04, 3.2.0-23-generic): 192.168.9.79

SRL:   64 MB
bdev: 128 MB

test revition: Git commit 9f77fd71154b191ff15d1c651615541bc7d7c596

# 测试结果

通过对 status.txt 中的 28 个测试用例进行测试，其中有 2 个测试用例测试失败，有 2
个测试用例的后续操作发生了 Oops，还有 2 个测试用例没有测试。

详细的测试结果，参见 status.txt 文件中的记录。

# 详细的失败用例测试结果

1. 对于两节点的情况，第 10 个测试用例

测试步骤：
        1. (P0, S1)
        2. (P0 ==data==> S1)
        3. 数据还没有同步完，连接断开 ==> C_STOPPED
        4. 连接恢复 ==> C_SYNC | DATA_CONSISTENT

在第 4 步之后，系统出现 Oops，并且状态显示中“SRL Behind”一行的数值是 0。

2. 对于基本的测试用例，第 6 个测试用例

测试步骤：
        1. (P0, S1)
        2. (P0) (S1)
        3. S1 init
        4. P0 ==> S0, (S0) (S1)
        5. (S0) (P1)
        6. 恢复连接

在执行第 3 步时，需要执行 rmmod 然后是 init 操作，在 rmmod 时，系统出现 Oops。

# 后续操作出现 Oops 的测试用例

1. 基本用例中的第 5 个用例

测试步骤：


   1. (P0, S1)
   2. 断开连接
   3. (P0) (P1)
   4. P0 P1 分别写入数据
   5. (S0) (P1)
   6. 恢复连接

在完成第 6 步之后，执行 fbsync 操作，系统出现了 Oops。

2. 基本用例中的第 6 个用例


   1. (P0, S1)
   2. P0 写入数据，使对 S1 产生 BM
   3. P0 reboot
   4. S0 ==> P1

在完成了第 4 步之后，执行 fullsync，在 S0 节点中发生了 Oops。


huruiqin
2015.1.8
